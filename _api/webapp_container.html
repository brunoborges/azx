---
title: Web App | Containers
description: Create a Web App using a container
author: Rob Conery
group: Web
---
###### CHANGE THESE AS NEEDED #######
RG="AZX"
IMAGE="dockeralias/image:tag"
APPNAME="AZX$RANDOM"

#You can get a list of locations by running 
#az account list-locations --query [].name
LOCATION="West US"

#The sku should be one of:
#F1(Free), D1(Shared), B1(Basic Small), B2(Basic Medium), B3(Basic Large), 
#S1(Standard Small), P1(Premium Small), P1V2(Premium V2 Small), 
#PC2 (Premium Container Small), PC3 (Premium Container Medium), 
#PC4 (Premium Container Large).

#accepted values: B1, B2, B3, D1, F1, FREE, P1, P1V2, P2, P2V2, P3, P3V2, PC2, PC3, PC4, S1, S2, S3, SHARED
SKU=S1

echo "Creating Resource Group"
az group create -n $RG --location $LOCATION


echo "Creating AppService Plan"
az appservice plan create --name $APPNAME \
                          --resource-group $RG \
                          --sku $SKU \
                          --is-linux

echo "Creating Web app"
az webapp create --resource-group $RG \
                  --plan $APPNAME \
                  --name $APPNAME \
                  --deployment-container-image-name "$IMAGE"

az webapp config container set --resource-group $RG --name $APPNAME \
                --docker-registry-server-user "[YOUR DOCKERHUB USER NAME]" \
                --docker-registry-server-password "[YOUR DOCKER HUB PASSWORD]!" \
                --enable-app-service-storage true 

#                Add this line if you have a custom repo                  
#                --docker-registry-server-url ["ADD THIS TOO"]

az webapp config appsettings set --name $APPNAME \
                  --resource-group $RG \
                  --settings WEBSITES_ENABLE_APP_SERVICE_STORAGE=true
                  
                  #If the port of your site is not on 80, set this here
                  #WEBSITES_PORT=3000          

#                 If you have a database, add the connection bits to the
#                 Settings above

echo "Setting up logging"
#setup logging and monitoring
az webapp log config --application-logging true \
                    --detailed-error-messages true \
                    --web-server-logging filesystem \
                    --level information \
                    --name $APPNAME \
                    --resource-group $RG

echo "An alias for setting your domain (when you're ready) has been added to your .env"
echo "To create a domain, you need to set a CNAME pointed to $APPNAME.azurewebsites.net"
echo "For more information you can have a look here: "
echo "https://docs.microsoft.com/en-us/azure/app-service/web-sites-traffic-manager-custom-domain-name?WT.mc_id=webapp-azx-robcon"
echo "alias setdomain='az webapp config hostname add --webapp-name $APPNAME --resource-group $RG --hostname [YOUR DOMAIN]'"

echo "Adding logs alias to .env. Invoking this will allow you to see the application logs realtime-ish."
#set an alias for convenience - add to .env
echo "alias logs='az webapp log tail -n $APPNAME -g $RG'" >> .env

echo "Opening site and viewing logs"
open https://$APPNAME.azurewebsites.net
source .env
logs